<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Guide - SPS</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/medical.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="container">
                <div class="logo">
                    <h1>SPS</h1>
                    <span class="logo-subtitle">Medical</span>
                </div>
                <ul class="nav-menu">
                    <li><a href="/index.html" class="nav-link">Home</a></li>
                    <li><a href="/dashboard.html" class="nav-link">Dashboard</a></li>
                    <li><a href="/inventory.html" class="nav-link">Inventory</a></li>
                    <li class="nav-dropdown">
                        <a href="/videos.html" class="nav-link" data-active-paths="/videos.html,/pictures.html">Media ‚ñæ</a>
                        <ul class="dropdown-menu">
                            <li><a href="/videos.html">Videos</a></li>
                            <li><a href="/pictures.html">Pictures</a></li>
                        </ul>
                    </li>
                    <li><a href="/kiwix.html" class="nav-link">Kiwix</a></li>
                    <li class="nav-dropdown"><a href="/gps.html" class="nav-link" data-active-paths="/gps.html,/osm-sync.html">Map ‚ñæ</a><ul class="dropdown-menu"><li><a href="/gps.html">Map View</a></li><li><a href="/osm-sync.html">Sync Maps</a></li></ul></li>
                    <li class="nav-dropdown"><a href="#" class="nav-link" data-active-paths="/familyprofile.html,/energy.html,/medical.html,/simulation.html">Tools ‚ñæ</a><ul class="dropdown-menu"><li><a href="/familyprofile.html">Family Profile</a></li><li><a href="/simulation.html">Simulation & Planning</a></li><li><a href="/energy.html">Energy Calculator</a></li><li><a href="/medical.html">Medical Guide</a></li></ul></li>
                </ul>
                <div class="nav-right">
                    <button id="theme-toggle" class="theme-toggle" onclick="toggleTheme()" title="Toggle Dark/Light Mode">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                    </button>
                    <div id="user-section" class="user-section" style="display: none;">
                        <span id="user-name"></span>
                        <button onclick="authManager.logout()" class="btn btn-danger btn-sm">Logout</button>
                    </div>
                    <div id="auth-buttons" style="display: flex; gap: 10px;">
                        <button onclick="authManager.showLoginModal()" class="btn btn-primary btn-sm">Login</button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="medical-main">
        <div class="container">
            <!-- Emergency Banner -->
            <div class="emergency-banner">
                <div class="emergency-icon">üö®</div>
                <div class="emergency-text">
                    <strong>In a real emergency, call 911!</strong>
                    <span>This guide is for educational purposes and emergency preparedness only.</span>
                </div>
            </div>

            <!-- Page Header -->
            <div class="page-header">
                <div class="page-header-left">
                    <h1 class="page-title">Medical Guide</h1>
                    <p class="page-subtitle">First aid reference, medications, and medical supply tracking</p>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="tab-nav">
                <button class="tab-btn active" data-tab="firstaid">
                    <span class="tab-icon">ü©π</span>
                    <span>First Aid</span>
                </button>
                <button class="tab-btn" data-tab="medications">
                    <span class="tab-icon">üíä</span>
                    <span>Medications</span>
                </button>
                <button class="tab-btn" data-tab="conditions">
                    <span class="tab-icon">üìã</span>
                    <span>Conditions</span>
                </button>
                <button class="tab-btn" data-tab="supplies">
                    <span class="tab-icon">üß∞</span>
                    <span>Supplies</span>
                </button>
            </div>

            <!-- First Aid Tab -->
            <div class="tab-panel active" id="firstaid-panel">
                <!-- Search -->
                <div class="search-bar">
                    <input type="text" id="firstaid-search" placeholder="Search first aid topics...">
                </div>

                <!-- Quick Reference Cards -->
                <div class="firstaid-grid" id="firstaid-grid">
                    <div class="firstaid-card" data-topic="cpr">
                        <div class="card-icon critical">‚ù§Ô∏è</div>
                        <div class="card-content">
                            <h3>CPR - Adult</h3>
                            <p>Cardiopulmonary resuscitation for adults</p>
                            <div class="card-tags"><span class="tag critical">Life-Threatening</span></div>
                        </div>
                    </div>
                    <div class="firstaid-card" data-topic="choking">
                        <div class="card-icon critical">üò´</div>
                        <div class="card-content">
                            <h3>Choking</h3>
                            <p>Heimlich maneuver and airway obstruction</p>
                            <div class="card-tags"><span class="tag critical">Life-Threatening</span></div>
                        </div>
                    </div>
                    <div class="firstaid-card" data-topic="bleeding">
                        <div class="card-icon critical">ü©∏</div>
                        <div class="card-content">
                            <h3>Severe Bleeding</h3>
                            <p>Wound control and tourniquet use</p>
                            <div class="card-tags"><span class="tag critical">Life-Threatening</span></div>
                        </div>
                    </div>
                    <div class="firstaid-card" data-topic="burns">
                        <div class="card-icon warning">üî•</div>
                        <div class="card-content">
                            <h3>Burns</h3>
                            <p>Thermal, chemical, and electrical burns</p>
                            <div class="card-tags"><span class="tag warning">Urgent</span></div>
                        </div>
                    </div>
                    <div class="firstaid-card" data-topic="fractures">
                        <div class="card-icon warning">ü¶¥</div>
                        <div class="card-content">
                            <h3>Fractures & Sprains</h3>
                            <p>Splinting and immobilization</p>
                            <div class="card-tags"><span class="tag warning">Urgent</span></div>
                        </div>
                    </div>
                    <div class="firstaid-card" data-topic="shock">
                        <div class="card-icon critical">‚ö°</div>
                        <div class="card-content">
                            <h3>Shock</h3>
                            <p>Recognition and treatment of shock</p>
                            <div class="card-tags"><span class="tag critical">Life-Threatening</span></div>
                        </div>
                    </div>
                    <div class="firstaid-card" data-topic="hypothermia">
                        <div class="card-icon warning">ü•∂</div>
                        <div class="card-content">
                            <h3>Hypothermia</h3>
                            <p>Cold exposure treatment</p>
                            <div class="card-tags"><span class="tag warning">Urgent</span></div>
                        </div>
                    </div>
                    <div class="firstaid-card" data-topic="heat">
                        <div class="card-icon warning">ü•µ</div>
                        <div class="card-content">
                            <h3>Heat Exhaustion/Stroke</h3>
                            <p>Heat-related emergencies</p>
                            <div class="card-tags"><span class="tag warning">Urgent</span></div>
                        </div>
                    </div>
                    <div class="firstaid-card" data-topic="poisoning">
                        <div class="card-icon critical">‚ò†Ô∏è</div>
                        <div class="card-content">
                            <h3>Poisoning</h3>
                            <p>Ingestion, inhalation, contact</p>
                            <div class="card-tags"><span class="tag critical">Life-Threatening</span></div>
                        </div>
                    </div>
                    <div class="firstaid-card" data-topic="bites">
                        <div class="card-icon info">üêç</div>
                        <div class="card-content">
                            <h3>Bites & Stings</h3>
                            <p>Snake, spider, insect, animal</p>
                            <div class="card-tags"><span class="tag info">Varies</span></div>
                        </div>
                    </div>
                    <div class="firstaid-card" data-topic="wounds">
                        <div class="card-icon info">ü©π</div>
                        <div class="card-content">
                            <h3>Wound Care</h3>
                            <p>Cleaning, dressing, infection prevention</p>
                            <div class="card-tags"><span class="tag info">Common</span></div>
                        </div>
                    </div>
                    <div class="firstaid-card" data-topic="allergic">
                        <div class="card-icon critical">üíâ</div>
                        <div class="card-content">
                            <h3>Allergic Reactions</h3>
                            <p>Anaphylaxis and EpiPen use</p>
                            <div class="card-tags"><span class="tag critical">Life-Threatening</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Medications Tab -->
            <div class="tab-panel" id="medications-panel">
                <div class="section-header">
                    <h3>Family Medications</h3>
                    <button class="btn btn-primary btn-sm" onclick="openMedicationModal()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Add Medication
                    </button>
                </div>
                <div class="medications-list" id="medications-list">
                    <div class="empty-state">
                        <span class="empty-icon">üíä</span>
                        <p>No medications added yet</p>
                        <button class="btn btn-outline" onclick="openMedicationModal()">Add First Medication</button>
                    </div>
                </div>

                <!-- Medication Reference -->
                <div class="medical-card">
                    <div class="card-header"><h3>OTC Medication Reference</h3></div>
                    <div class="card-body">
                        <div class="med-reference-grid">
                            <div class="med-ref-item">
                                <div class="med-name">Ibuprofen (Advil/Motrin)</div>
                                <div class="med-uses">Pain, fever, inflammation</div>
                                <div class="med-dose">Adults: 200-400mg every 4-6h, max 1200mg/day</div>
                            </div>
                            <div class="med-ref-item">
                                <div class="med-name">Acetaminophen (Tylenol)</div>
                                <div class="med-uses">Pain, fever (liver-safe for most)</div>
                                <div class="med-dose">Adults: 325-650mg every 4-6h, max 3000mg/day</div>
                            </div>
                            <div class="med-ref-item">
                                <div class="med-name">Diphenhydramine (Benadryl)</div>
                                <div class="med-uses">Allergies, sleep, mild allergic reactions</div>
                                <div class="med-dose">Adults: 25-50mg every 4-6h, max 300mg/day</div>
                            </div>
                            <div class="med-ref-item">
                                <div class="med-name">Loperamide (Imodium)</div>
                                <div class="med-uses">Diarrhea</div>
                                <div class="med-dose">Adults: 4mg initial, then 2mg after each loose stool, max 8mg/day</div>
                            </div>
                            <div class="med-ref-item">
                                <div class="med-name">Aspirin</div>
                                <div class="med-uses">Pain, fever, heart attack (if suspected)</div>
                                <div class="med-dose">Pain: 325-650mg every 4h. Heart: 325mg chewed</div>
                            </div>
                            <div class="med-ref-item">
                                <div class="med-name">Ondansetron (Zofran)</div>
                                <div class="med-uses">Nausea/vomiting (prescription)</div>
                                <div class="med-dose">4-8mg every 8h as needed</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Conditions Tab -->
            <div class="tab-panel" id="conditions-panel">
                <div class="section-header">
                    <h3>Family Health Conditions</h3>
                    <button class="btn btn-primary btn-sm" onclick="openConditionModal()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Add Condition
                    </button>
                </div>
                <div class="conditions-list" id="conditions-list">
                    <div class="empty-state">
                        <span class="empty-icon">üìã</span>
                        <p>No conditions tracked yet</p>
                        <p class="subtext">Track family health conditions, allergies, and special needs</p>
                        <button class="btn btn-outline" onclick="openConditionModal()">Add Condition</button>
                    </div>
                </div>
            </div>

            <!-- Supplies Tab -->
            <div class="tab-panel" id="supplies-panel">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-green">ü©π</div>
                        <div class="stat-content">
                            <div class="stat-value" id="total-supplies">0</div>
                            <div class="stat-label">Total Items</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-yellow">‚ö†Ô∏è</div>
                        <div class="stat-content">
                            <div class="stat-value" id="low-supplies">0</div>
                            <div class="stat-label">Low Stock</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-red">üìÖ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="expiring-supplies">0</div>
                            <div class="stat-label">Expiring Soon</div>
                        </div>
                    </div>
                </div>

                <div class="section-header">
                    <h3>First Aid Kit Inventory</h3>
                    <button class="btn btn-primary btn-sm" onclick="openSupplyModal()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Add Supply
                    </button>
                </div>
                <div class="supplies-list" id="supplies-list">
                    <div class="empty-state">
                        <span class="empty-icon">üß∞</span>
                        <p>No supplies tracked yet</p>
                        <button class="btn btn-outline" onclick="openSupplyModal()">Add First Aid Supplies</button>
                    </div>
                </div>

                <!-- Recommended Supplies Checklist -->
                <div class="medical-card">
                    <div class="card-header"><h3>Recommended First Aid Kit Contents</h3></div>
                    <div class="card-body">
                        <div class="checklist-grid">
                            <div class="checklist-section">
                                <h4>Wound Care</h4>
                                <label class="checklist-item"><input type="checkbox"> Adhesive bandages (various sizes)</label>
                                <label class="checklist-item"><input type="checkbox"> Sterile gauze pads (4x4)</label>
                                <label class="checklist-item"><input type="checkbox"> Roller bandages</label>
                                <label class="checklist-item"><input type="checkbox"> Medical tape</label>
                                <label class="checklist-item"><input type="checkbox"> Butterfly closures</label>
                                <label class="checklist-item"><input type="checkbox"> Antiseptic wipes</label>
                                <label class="checklist-item"><input type="checkbox"> Antibiotic ointment</label>
                            </div>
                            <div class="checklist-section">
                                <h4>Trauma</h4>
                                <label class="checklist-item"><input type="checkbox"> Tourniquet (CAT or similar)</label>
                                <label class="checklist-item"><input type="checkbox"> Israeli bandage</label>
                                <label class="checklist-item"><input type="checkbox"> Hemostatic gauze</label>
                                <label class="checklist-item"><input type="checkbox"> Chest seal</label>
                                <label class="checklist-item"><input type="checkbox"> Splint material</label>
                                <label class="checklist-item"><input type="checkbox"> Triangle bandage (sling)</label>
                            </div>
                            <div class="checklist-section">
                                <h4>Tools</h4>
                                <label class="checklist-item"><input type="checkbox"> Trauma shears</label>
                                <label class="checklist-item"><input type="checkbox"> Tweezers</label>
                                <label class="checklist-item"><input type="checkbox"> Safety pins</label>
                                <label class="checklist-item"><input type="checkbox"> Disposable gloves</label>
                                <label class="checklist-item"><input type="checkbox"> CPR mask</label>
                                <label class="checklist-item"><input type="checkbox"> Flashlight</label>
                            </div>
                            <div class="checklist-section">
                                <h4>Medications</h4>
                                <label class="checklist-item"><input type="checkbox"> Pain relievers</label>
                                <label class="checklist-item"><input type="checkbox"> Antihistamines</label>
                                <label class="checklist-item"><input type="checkbox"> Anti-diarrheal</label>
                                <label class="checklist-item"><input type="checkbox"> Hydrocortisone cream</label>
                                <label class="checklist-item"><input type="checkbox"> Eye wash</label>
                                <label class="checklist-item"><input type="checkbox"> Oral rehydration salts</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- First Aid Detail Modal -->
    <div class="modal" id="firstaid-modal">
        <div class="modal-overlay" onclick="closeFirstAidModal()"></div>
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2 id="firstaid-modal-title">First Aid</h2>
                <button class="modal-close" onclick="closeFirstAidModal()">&times;</button>
            </div>
            <div class="modal-body" id="firstaid-modal-body"></div>
        </div>
    </div>

    <!-- Add Medication Modal -->
    <div class="modal" id="medication-modal">
        <div class="modal-overlay" onclick="closeMedicationModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Medication</h2>
                <button class="modal-close" onclick="closeMedicationModal()">&times;</button>
            </div>
            <form id="medication-form" onsubmit="saveMedication(event)">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Medication Name *</label>
                        <input type="text" id="med-name" name="name" required placeholder="e.g., Metformin">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Dosage</label>
                            <input type="text" id="med-dosage" name="dosage" placeholder="e.g., 500mg">
                        </div>
                        <div class="form-group">
                            <label>Frequency</label>
                            <input type="text" id="med-frequency" name="frequency" placeholder="e.g., Twice daily">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Family Member</label>
                        <input type="text" id="med-person" name="person" placeholder="Who takes this medication?">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Quantity on Hand</label>
                            <input type="number" id="med-quantity" name="quantity">
                        </div>
                        <div class="form-group">
                            <label>Expiration Date</label>
                            <input type="date" id="med-expiration" name="expiration">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea id="med-notes" name="notes" rows="2" placeholder="Special instructions, interactions, etc."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeMedicationModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Condition Modal -->
    <div class="modal" id="condition-modal">
        <div class="modal-overlay" onclick="closeConditionModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Health Condition</h2>
                <button class="modal-close" onclick="closeConditionModal()">&times;</button>
            </div>
            <form id="condition-form" onsubmit="saveCondition(event)">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Condition Name *</label>
                        <input type="text" id="cond-name" name="name" required placeholder="e.g., Diabetes Type 2">
                    </div>
                    <div class="form-group">
                        <label>Family Member *</label>
                        <input type="text" id="cond-person" name="person" required placeholder="Who has this condition?">
                    </div>
                    <div class="form-group">
                        <label>Severity</label>
                        <select id="cond-severity" name="severity">
                            <option value="mild">Mild</option>
                            <option value="moderate">Moderate</option>
                            <option value="severe">Severe</option>
                            <option value="life-threatening">Life-Threatening</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Emergency Treatment</label>
                        <textarea id="cond-treatment" name="treatment" rows="3" placeholder="What to do in an emergency..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea id="cond-notes" name="notes" rows="2"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeConditionModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Supply Modal -->
    <div class="modal" id="supply-modal">
        <div class="modal-overlay" onclick="closeSupplyModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Medical Supply</h2>
                <button class="modal-close" onclick="closeSupplyModal()">&times;</button>
            </div>
            <form id="supply-form" onsubmit="saveSupply(event)">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Item Name *</label>
                        <input type="text" id="supply-name" name="name" required placeholder="e.g., Gauze Pads 4x4">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Category</label>
                            <select id="supply-category" name="category">
                                <option value="wound">Wound Care</option>
                                <option value="trauma">Trauma</option>
                                <option value="medication">Medication</option>
                                <option value="tool">Tools</option>
                                <option value="ppe">PPE</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Quantity *</label>
                            <input type="number" id="supply-quantity" name="quantity" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Min Quantity</label>
                            <input type="number" id="supply-min" name="min_quantity">
                        </div>
                        <div class="form-group">
                            <label>Expiration Date</label>
                            <input type="date" id="supply-expiration" name="expiration">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" id="supply-location" name="location" placeholder="e.g., Main First Aid Kit">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeSupplyModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/theme-toggle.js"></script>
    <script src="js/api-client.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/medical-module.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/sidebar.js"></script>
</body>
</html>
